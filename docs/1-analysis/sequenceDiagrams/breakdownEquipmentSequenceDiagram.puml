@startuml
actor ":Personnel" as Personnel
actor ":Propriétaire" as Proprietaire
participant ":Système" as Systeme
participant ":Base de données" as BDD
participant ":Matériel" as Materiel

title Gestion des Pannes de Matériel

== Signalement d'une Panne ==
Personnel -> Systeme : signaler une panne
activate Personnel
activate Systeme

Systeme -> BDD : vérifier les détails du matériel
activate BDD
BDD --> Systeme : informations du matériel
deactivate BDD

Systeme -> Materiel : changer statut à "EnPanne"
activate Materiel
Materiel -> BDD : mettre à jour le statut
activate BDD
BDD --> Materiel : confirmation de mise à jour
deactivate BDD

Systeme -> Systeme : créer une nouvelle entrée Panne
Systeme -> BDD : enregistrer les détails de la panne
activate BDD
note right: Inclut commentaires, date, description
BDD --> Systeme : confirmation d'enregistrement
deactivate BDD

Systeme --> Personnel : confirmation de signalement
deactivate Systeme
deactivate Personnel

== Qualification de la Panne ==
Proprietaire -> Systeme : qualifier la panne
activate Proprietaire
activate Systeme

alt Panne réparable
    Systeme -> Materiel : évaluer la réparabilité
    activate Materiel
    Materiel -> BDD : vérifier historique des pannes
    activate BDD
    BDD --> Materiel : historique des pannes
    deactivate BDD

    Proprietaire -> Systeme : décider de réparer
    Systeme -> Materiel : programmer réparation
    Materiel -> BDD : mettre à jour statut "Reparation"
    activate BDD
    BDD --> Materiel : confirmation
    deactivate BDD
else Matériel non réparable
    Proprietaire -> Systeme : déclarer hors service
    Systeme -> Materiel : changer statut "HorsService"
    Materiel -> BDD : mettre à jour statut
    activate BDD
    BDD --> Materiel : confirmation
    deactivate BDD
end

Systeme --> Proprietaire : confirmation de qualification
deactivate Systeme

== Résolution de la Panne ==
Personnel -> Systeme : marquer panne réparée
activate Personnel
activate Systeme

Systeme -> Materiel : changer statut à "EnService"
activate Materiel
Materiel -> BDD : mettre à jour le statut
activate BDD
BDD --> Materiel : confirmation de mise à jour
deactivate BDD

Systeme -> BDD : enregistrer détails de réparation
activate BDD
note right: Coût, date, détails techniques
BDD --> Systeme : confirmation
deactivate BDD

Systeme --> Personnel : confirmation de résolution
deactivate Systeme
deactivate Personnel

== Consultation Historique ==
Proprietaire -> Systeme : consulter historique des pannes
activate Proprietaire
activate Systeme

Systeme -> BDD : extraire historique des pannes
activate BDD
BDD --> Systeme : liste des pannes par matériel
deactivate BDD

Systeme --> Proprietaire : afficher rapport détaillé
note right: Inclut pannes par période, coûts, matériels
deactivate Systeme
deactivate Proprietaire

@enduml
