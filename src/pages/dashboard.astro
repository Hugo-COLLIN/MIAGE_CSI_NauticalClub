---
import BaseLayout from "../layouts/BaseLayout.astro";
import {checkAuth} from "../services/auth/page-auth";
import '../styles/dashboard.css';

const user = await checkAuth(Astro);
if (!user) return Astro.redirect('/login', 302);

const managementPages = [
  {
    title: 'Clients',
    description: 'Gérer les informations des clients',
    icon: '👥',
    link: '/manage/clients'
  },
  {
    title: 'Cours',
    description: 'Gérer les cours proposés',
    icon: '📚',
    link: '/manage/cours'
  },
  {
    title: 'Forfaits',
    description: 'Gérer les forfaits disponibles',
    icon: '🎫',
    link: '/manage/forfait'
  },
  {
    title: 'Locations',
    description: 'Gérer les locations',
    icon: '🔑',
    link: '/manage/location'
  },
  {
    title: 'Matériel',
    description: 'Gérer le matériel disponible',
    icon: '🛠️',
    link: '/manage/materiel'
  },
  {
    title: 'Pannes',
    description: 'Gérer les pannes et maintenance',
    icon: '⚠️',
    link: '/manage/panne'
  },
  {
    title: 'Inscriptions',
    description: 'Gérer les inscriptions',
    icon: '📝',
    link: '/manage/signup'
  }
];
---

<BaseLayout title="Dashboard">
  <div class="dashboard-container">
    <h1>Tableau de bord</h1>
    <div class="dashboard-grid">
      {managementPages.map(page => (
          <a href={page.link} class="dashboard-card">
            <div class="card-icon">{page.icon}</div>
            <h2>{page.title}</h2>
            <p>{page.description}</p>
          </a>
      ))}
    </div>
  </div>
</BaseLayout>
