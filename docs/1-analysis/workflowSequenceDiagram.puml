@startuml
actor Client as C
actor "Garçon de plage" as G
actor "Moniteur" as M
actor "Propriétaire" as P
participant "SYSTEME" as App
participant "Base de donnees" as DB
participant "Matériel" as Mat
participant "Cours" as Cour
participant "Forfait" as Forf
participant "Camping" as Camp

G -> App : S'inscrire à un cours (niveau, forfait choisi)
activate G
App --> G : Envoyer confirmation d'inscription (détails cours, remise, reçu)
deactivate G
App -> DB : Récupérer la liste des cours disponibles
activate App
DB --> App : Liste des cours disponibles
deactivate App

M -> App : Sélectionner un cours (date, horaire)
App -> DB : Vérifier disponibilité du moniteur et du matériel
DB -> Mat : Vérifier statut du matériel
Mat --> DB : Matériel disponible
DB --> App : Disponibilité confirmée

M -> App : Indiquer affiliation à un camping partenaire
App -> DB : Vérifier le camping dans la liste des partenaires
DB -> Camp : Vérifier affiliation
Camp --> DB : Remise confirmée (10%)
DB --> App : Appliquer remise
C -> App  : Saisir les informations de paiement

App -> Pay : Lancer le paiement (prix ajusté)
Pay --> App : Paiement validé
App --> C : Détails de paiement

M -> App : Confirmer l'inscription
App -> DB : Enregistrer inscription (client, cours, moniteur, forfait, remise)
DB --> App : Inscription enregistrée

App -> DB : Mettre à jour le stock de matériel (réserver)
DB -> Mat : Réserver matériel pour le cours
Mat --> DB : Réservation confirmée

App -> M : Notifier le moniteur (détails du cours, client)
M --> App : Confirmation réception

App -> G : Demander préparation du matériel
G -> Mat : Préparer le matériel pour le client
Mat --> G : Préparation terminée
G --> App : Confirmation de préparation

App -> P : Envoyer rapport de l'inscription (client, cours, paiement)
P --> App : Accusé de réception
@enduml
