---
import BaseLayout from "../layouts/BaseLayout.astro";
import {checkAuth} from "../services/auth/page-auth";
import '../styles/dashboard.css';

const user = await checkAuth(Astro);
if (!user) return Astro.redirect('/login', 302);

const managementPages = [
  {
    title: 'Clients',
    description: 'GÃ©rer les informations des clients',
    icon: 'ğŸ‘¥',
    link: '/manage/clients'
  },
  {
    title: 'Cours',
    description: 'GÃ©rer les cours proposÃ©s',
    icon: 'ğŸ“š',
    link: '/manage/cours'
  },
  {
    title: 'Forfaits',
    description: 'GÃ©rer les forfaits disponibles',
    icon: 'ğŸ«',
    link: '/manage/forfait'
  },
  {
    title: 'Locations',
    description: 'GÃ©rer les locations',
    icon: 'ğŸ”‘',
    link: '/manage/location'
  },
  {
    title: 'MatÃ©riel',
    description: 'GÃ©rer le matÃ©riel disponible',
    icon: 'ğŸ› ï¸',
    link: '/manage/materiel'
  },
  {
    title: 'Pannes',
    description: 'GÃ©rer les pannes et maintenance',
    icon: 'âš ï¸',
    link: '/manage/panne'
  },
  {
    title: 'Inscriptions',
    description: 'GÃ©rer les inscriptions',
    icon: 'ğŸ“',
    link: '/manage/signup'
  }
];
---

<BaseLayout title="Dashboard">
  <div class="dashboard-container">
    <h1>Tableau de bord</h1>
    <div class="dashboard-grid">
      {managementPages.map(page => (
          <a href={page.link} class="dashboard-card">
            <div class="card-icon">{page.icon}</div>
            <h2>{page.title}</h2>
            <p>{page.description}</p>
          </a>
      ))}
    </div>
  </div>
</BaseLayout>
